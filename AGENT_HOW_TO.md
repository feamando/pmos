# AGENT_HOW_TO.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## 1. Repository Purpose & Entry Points

This repo is a Git-backed, CLI-managed replacement for Google Drive/Notion for product management documentation. All work is Markdown-first and organized for use with AI agents.

Primary entry points for Warp agents:
- Root `README.md`: high-level directory map of the documentation system.
- `AGENT.md`: concise overview of goals, workflows, and where to look next.
- `AI_Guidance/Rules/AI_AGENTS_GUIDE.md`: detailed operating guide for AI agents (architecture, workflows, naming rules).
- `AI_Guidance/Rules/NGO.md`: style and persona guide ("Jane Smith" voice) that should shape written outputs.

When starting work in this repo:
- Read `AGENT.md`.
- Read `AI_Guidance/Rules/AI_AGENTS_GUIDE.md` for operational rules.
- Read `AI_Guidance/Rules/NGO.md` to internalize the persona and writing style.

## 2. High-Level Architecture

### 2.1 Top-level structure

The repo is organized around product management artifacts rather than code modules:
- `AI_Guidance/`: Operational rules, templates, and context for AI agents.
  - `Rules/`: Core behavior and style guides for agents.
    - `AI_AGENTS_GUIDE.md`: how to operate in this repo (search patterns, file conventions, workflows).
    - `NGO.md`: tone, vocabulary, and response frameworks.
  - `Frameworks/`: document templates (e.g., PRDs, decision logs, meeting notes). Agents should use these instead of inventing formats.
  - `Core_Context/`: product and organizational context; use this as the first stop for domain knowledge.
  - `Tools/`: code tools that support the workflow (currently a Google Drive MCP integration).
- `Products/`: single source of truth for product work (specs, roadmaps, project docs), organized by `Product > Project`.
- `Team/`: people-management artifacts (1:1s, feedback, recruiting).
- `Reporting/`: outbound communication (updates, QBRs, recurring performance reporting).
- `Planning/`: strategic/temporal planning (OKRs, headcount, strategy docs).

The expectation is that agents route content into the appropriate subtree and keep these directories as the canonical sources of truth.

### 2.2 Documentation workflows & conventions

Key rules from `AI_AGENTS_GUIDE.md` that Warp should respect:
- **Discovery:**
  - Before answering questions, search for existing context in `AI_Guidance/Core_Context` and existing work in `Products/`.
  - Use file search and content search rather than creating new docs by default.
- **Document creation:**
  - Never start from a blank file when a relevant template exists.
  - Look in `AI_Guidance/Frameworks/` for templates such as PRDs, decision logs, and meeting notes.
  - File naming:
    - Dated, ephemeral docs: `YYYY-MM-DD-topic-name.md`.
    - Living docs: `kebab-case-descriptive.md` (e.g., `roadmap.md`).
- **Document updates:**
  - For logs (decisions, meetings), append entries rather than rewriting history; follow the ordering convention used in the existing file (reverse-chronological vs chronological).
  - When creating a new doc under a folder, link it from that folder's `README.md` if present.
- **Filesystem hygiene:**
  - Avoid spaces in filenames.
  - Avoid loose files directly under high-level `Products/` folders; prefer project subfolders.

### 2.3 AI persona & writing style

From `NGO.md`, outputs generated by Warp agents should generally:
- Be direct, outcome-focused, and highly structured; prefer headings + bullets over long prose.
- Use concise, factual phrasing for status and operations; reserve narrative style for strategy/whitepapers.
- Follow the standard response frameworks (e.g., Context → Analysis/Status → Plan/Next steps; structured meeting notes; metrics-heavy performance updates).

Warp does not need to replicate the full NGO document; instead, treat it as the source of truth when you need to tune tone or choose between multiple valid presentation styles.

## 3. Code & Tools Overview

Although the repo is documentation-centric, there are a few Python utilities that support ingestion and external integration.

### 3.1 `read_docx.py` (root)

Purpose:
- Lightweight CLI helper to convert `.docx` files into plain text for ingestion into this Markdown-based system.

Behavior:
- Uses `python-docx` (`from docx import Document`) to open a `.docx` and print paragraph text joined by newlines.

Typical usage:
- Convert a Word document to text:
  - `python read_docx.py path/to/file.docx`
- The script prints either the extracted text or an error message if reading fails.

### 3.2 Google Drive MCP server (`AI_Guidance/Tools/gdrive_mcp/server.py`)

This is a FastMCP-based server that exposes Google Drive as tools for AI agents, and also supports a CLI mode.

Key components:
- **Authentication & config:**
  - Uses OAuth2 with the scopes declared in `SCOPES` (Drive read-only and metadata).
  - Looks for `credentials.json` and `token.json` in `AI_Guidance/Tools/gdrive_mcp/`.
  - On first run, launches a local auth flow and persists `token.json` for reuse.
- **MCP tools (for agent integrations):**
  - `gdrive_list(page_size=10, folder_id=None)`: list non-trashed files, optionally under a specific folder.
  - `gdrive_search(query, page_size=10)`: search Drive using the standard Drive query language; automatically filters out trashed items unless explicitly requested.
  - `gdrive_read(file_id)`: read/export the content of a Google Doc/Sheet or download other files; returns text when possible and warns on binary files.
- **CLI mode:**
  - If invoked with `--cli`, the script acts as a command-line tool rather than starting an MCP server.
  - Subcommands mirror the MCP tools: `list`, `search`, and `read`.

This tool is the bridge between the Git-based knowledge base and upstream documents still stored in Google Drive.

## 4. Commands for Common Tasks

There is no global build or test harness; the primary workflows are editing Markdown and running small Python utilities. Below are the key commands Warp is expected to use.

### 4.1 Environment setup

Python dependencies are module-local rather than centralized.

- Install dependencies for the Google Drive MCP server:
  - `pip install -r AI_Guidance/Tools/gdrive_mcp/requirements.txt`
- Ensure the `python-docx` package is available for `read_docx.py`:
  - `pip install python-docx`

### 4.2 Working with documentation                                           
                                                                             
Search for existing context (preferred before creating new docs):            
- Search core context for a term:                                            
  - `grep -r "<term>" AI_Guidance/Core_Context`                              
                                                                             
Update daily context:
- Run `./update-context.ps1` to fetch new emails/docs.
- The script will fetch data, and you (the Agent) are then required to synthesize the raw data into the daily summary format defined in `AI_Guidance/Rules/NGO.md`.

**Context file versioning:**
- Files use the format `YYYY-MM-DD-NN-context.md` where `NN` is the run number (01, 02, etc.).
- This allows multiple intra-day updates without losing earlier context.
- When synthesizing, read both:
  1. The raw data from `.gemini/tmp/raw_context_data_pending.txt`
  2. The previous context file (if it exists for the day)
- Merge new updates while retaining key decisions/blockers from previous files (unless resolved).

Discover and use templates:                                                  
- List available frameworks/templates:                                       
  - `ls AI_Guidance/Frameworks`
When creating new docs, follow the naming conventions in `AI_AGENTS_GUIDE.md` and, where appropriate, link new files from the relevant folder `README.md`.

### 4.3 Using the Google Drive MCP integration

Run in MCP server mode (for agents that understand MCP):
- From the repo root:
  - `python AI_Guidance/Tools/gdrive_mcp/server.py`

Run in CLI mode for ad hoc usage or manual testing:
- List files (optionally within a folder):
  - `python AI_Guidance/Tools/gdrive_mcp/server.py --cli list --page_size 10`
  - `python AI_Guidance/Tools/gdrive_mcp/server.py --cli list --page_size 20 --folder_id <folder_id>`
- Search for files using a Drive query:
  - `python AI_Guidance/Tools/gdrive_mcp/server.py --cli search "name contains 'project'" --page_size 10`
- Read a file by ID:
  - `python AI_Guidance/Tools/gdrive_mcp/server.py --cli read <file_id>`

These commands double as "single test" invocations for the individual tools: use them to validate that each operation works after making code changes.

### 4.4 Quick repository sanity checks

For basic hygiene checks referenced in `AI_AGENTS_GUIDE.md` (adapt as needed for your shell):
- Identify top-level files for potential reorganization:
  - `find . -maxdepth 2 -type f`

### 4.5 Ending a Session

Use `logout.ps1` to properly end a session instead of manual git commands:
- `.\logout.ps1 "Summary of work done..."`

**What it does:**
1. Pulls latest changes from `origin/main` (syncs remote)
2. Appends your session summary to the latest context file of the day
3. Pushes all changes to `origin/main` (persists context and code)

**Why use it:**
- Ensures context continuity between sessions
- Standardizes the session end workflow
- Prevents context loss from forgotten commits

## 5. How Warp Agents Should Approach Tasks Here

When operating in this repo, Warp agents should:
- Treat `AI_Guidance/Rules/AI_AGENTS_GUIDE.md` and `AI_Guidance/Rules/NGO.md` as the primary behavioral and style references.
- Prefer organizing and enriching existing Markdown artifacts over creating new, redundant ones.
- Use the Google Drive MCP integration and `read_docx.py` to pull external documents into the Git-based system when needed, then normalize them into the established templates and naming conventions.
